version: 1.0.0
env-file: .env
groups:
  - name: tests
    targets:
      test-1:
        help: test-1 args `all` should be false
        args:
          all:
            type: bool
            action: store_true
            help: arg `all`
        run: |
          assert not {{ args.all }}

      test-2:
        help: test-2 args `all` should be true
        args:
          all:
            type: bool
            action: store_true
            help: arg `all`
        run: |
          assert {{ args.all }}

      test-3-a:
        help: test-3-a is a dep for test-3-b
        run: "true"

      test-3-b:
        help: test-3-b
        dependencies:
          - target: test-3-a
        run: "true"

      test-4-dep:
        help: test-4-dep is a dep for test-4
        args:
          arg1:
            help: arg1
            type: bool
            action: store_true
        run: |
          assert {{ args.arg1 }}

      test-4:
        help: test-4
        args:
          trigger-dep:
            type: bool
            action: store_true
        dependencies:
          - target: test-3-a
            if: {{ args.trigger_dep }}
        run: "true"
